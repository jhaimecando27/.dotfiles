#!/usr/bin/env bash
# Make virtual device via pipewire for OBS
#   Used to connect OBS to virtual meetings (GMeets, Discord, MS Teams)
#   I generally use it for GMeets and MS Teams
#
# Ref (No explanation): https://obsproject.com/forum/threads/quick-and-easy-virtual-microphone-for-linux.158340/

# It create sink to get the output of OBS and put it in source for the virtual meetings
# Not sure with my explanation here, this is what I see it using "qjackctl" and "helvum".
pactl load-module module-null-sink media.class=Audio/Sink sink_name=Virtual-Mic channel_map=front-left,front-right
pactl load-module module-null-sink media.class=Audio/Source/Virtual sink_name=Virtual-Mic channel_map=front-left,front-right

# IMPORTANT
# Possible can result to error if OBS is not opened, cuz it will connect to it? Not sure sorry :(
# It just based on my exp
pw-link Virtual-Mic:monitor_FL Virtual-Mic:input_FL
pw-link Virtual-Mic:monitor_FR Virtual-Mic:input_FR

# Final Note
# I don't know why not create one source w/ sink. Also, I don't know why it need to connect in that way to the OBS.
# Why not research/study? I'm busy :(
# It works so... yah, it works HAHAHAHAH
